<div class="row">
  <div class="col-xs-12">
    <div class="page-header">
      <h1>{{ post.title }} <small>{{ post.publication_date }}</small></h1>
    </div>
    <span ng-if='post.image'>
		<img ng-src='{{ post.image }}' class="img-responsive"/><br/>
		</span>

    <p>{{ post.content }}</p>
    <hr/>

    <div class="row">
      <div class="col-md-6">
        <form ng-submit='addComment()'>
          <div class="form-group" ng-class="{ 'has-error': commentError.content }">
            <textarea id="commentTextArea" class="form-control" placeholder="New comment" ng-model='newComment.content'></textarea>
            <label class="control-label" for="commentTextArea" ng-if="commentError.content">
              <span ng-repeat="error in commentError.content">{{ error }}<br/></span>
            </label>
          </div>
          <input class="btn btn-default" type='submit' value="Add Comment"/>
        </form>
      </div>
      <div class="col-md-6">
        <p style="color: red;" ng-if='newComment.content'>Preview:</p>
        <p>{{ newComment.content }}</p>
      </div>
    </div>
    <hr/>

    <div class="row" ng-show="comments.length > 0">
      <div class="col-md-6">
        <h3>Comments</h3>
      </div>
      <div class="col-md-6">
        <input class="form-control" type="text" ng-model='query' placeholder="Filter Comments"/>
      </div>
    </div>
    <div class="col-md-12">
      <hr/>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div ng-repeat='comment in comments | orderBy: commentOrder | filter: query'>
          {{ comment.content }}
          <br/>
          <a href="#" ng-click="isShowingReplies = !isShowingReplies">
            <span ng-show="!isShowingReplies">Replies:</span>
            <span ng-show="isShowingReplies">Hide:</span>
            &nbsp;{{ comment.reply_count }}
          </a>
          <a href="#"
             class="btn btn-small btn-default pull-right"
             confirm-click="Do you want to delete this comment?"
             confirmed-click="deleteComment(comment)">
            <i class="glyphicon glyphicon-remove"></i>
          </a>
          <br/>
          <div class="col-sm-6" ng-show="isShowingReplies">
            <comment-reply-thread comment="comment"></comment-reply-thread>
            <p style="color: red;" ng-if='reply.content'>Preview: {{ reply.content }}</p>
            <form ng-submit='addCommentReply(reply, comment)'>
              <textarea class="form-control" ng-model='reply.content' placeholder="Reply..."></textarea>
              <input class="btn btn-sm btn-default" type='submit' value="Reply"/>
            </form>
          </div>

          <div class="clearfix"></div>
          <hr/>
        </div>
      </div>
    </div>
  </div>
</div>